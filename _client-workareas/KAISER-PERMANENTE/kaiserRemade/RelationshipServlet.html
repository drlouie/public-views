<!-- Sample HTML file --> <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">


<HTML>
<HEAD>
<!--  <SCRIPT language="JavaScript1.1" src="file:///X:/ProjectsStudio Projectsjavascript/Relation.js"></SCRIPT> -->
<META name="GENERATOR" content="IBM WebSphere Page Designer V3.5.3 for Windows">
<META http-equiv="Content-Style-Type" content="text/css">
<TITLE>Relationship</TITLE>
<STYLE>

<!--
.label {
	COLOR : #0033FF; 
	font-family: arial,verdana,sans-serif;
	font-size : 12px;
	font-weight : bold;
	font-style: normal;	
	}
.input {
	COLOR : #000000; 
	font-family: verdana, arial, sans-serif;
	font-size : 12px;
	font-weight : normal;
	font-style: normal;	
	}
.caption {
	COLOR : #003333; 
	font-family: verdana, arial, sans-serif;
	font-size : 12px;
	font-weight : bold;
	font-style: normal;	
	}
.submit {
	COLOR : #0000; 
	font-family: verdana, arial, sans-serif;
	font-size : 12px;
	font-weight : bold;
	font-style: normal;	
	}


.title {
	COLOR : #cc3333; 
	font-family: arial,verdana,sans-serif;
	font-size : 12px;
	font-weight : bold;
	font-style: normal;	
	}
IMG{
  color : olive;
}

-->
</STYLE>
<!--<LINK href="C:/WINNT/Profiles/axdangre/Personal/Studio 3.5 Projectstheme/Master.css" rel="stylesheet" type="text/css">-->


<!--Dynamic CSS Javascript-->
<script language="javascript" src="js/common_css.js"></script>



<script language="Javascript">
<!--
//MOUSEOVER IMAGE PRELOAD

//add button
image15 = new Image();
image15.src = "images/add_ov.gif";
image16 = new Image();
image16.src = "images/add_off.gif";
//delete selected button
image17 = new Image();
image17.src = "images/delsel_ov.gif";
image18 = new Image();
image18.src = "images/delsel_off.gif";

//-->
</script>



<SCRIPT language="JavaScript">

   var enableList = false;

function validateForm(theForm)
 {	
 //alert("inside jfff validate");
var errorStatus = false;
var errorFields ="Please correct the following error(s)\n";
var todays = "";

     if(document.Relationship.primaryRole.value == ""  &&
	document.Relationship.secondaryBid.value == ""  &&
	document.Relationship.secBrokerName.value == ""  &&
	document.Relationship.secondaryRole.value == ""  &&
	document.Relationship.effectiveDate.value == ""  &&
	document.Relationship.endDate.value == "" )  {


}
else {


if(document.Relationship.primaryRole.value  == "")
   {
	errorFields+="PrimaryRole is a required field\n";
	errorStatus	= true;			
   }  
 
if(document.Relationship.secondaryBid.value  == "")
   {
	errorFields+="SecondaryBid is a required field\n";
	errorStatus	= true;			
   }  else
   {
	checkBrokerID(theForm.secondaryBid.value);
   }
   
if(document.Relationship.secBrokerName.value  == "")
   {
	errorFields+="Cannot add without Secondary Broker name\n";
	errorStatus	= true;			
   }
   
if(document.Relationship.secondaryRole.value == "")
   {
	errorFields+="SecondaryRole is a required field\n";
	errorStatus	= true;			
   }  
  if(document.Relationship.effectiveDate.value  == "")
   {
	errorFields+="EffectiveDate is a required field\n";
 	errorStatus = true;		
   }else  
   {
          checkeffectiveDate(theForm.effectiveDate.value)  
	 
   }
/*	
  if(document.Relationship.endDate.value  == "")
   {
	errorFields+="endDate Missing \n";
 	errorStatus = true;		
   }else
*/

  if(document.Relationship.endDate.value  != "")
   {
        checkendDate(theForm.endDate.value)  
 	compareDate(theForm.effectiveDate.value,theForm.endDate.value);
   }

}
if (errorStatus == true)
{
	alert(errorFields);
	return false;
}
else
	return true;


function checkBrokerID(BrokerID)
 {
   var checkOK = "0123456789";
   var checkStr = BrokerID;
   var allValid = true;
   var decPoints = 0;
   var allNum = "";
   for (i = 0;  i < checkStr.length;  i++)
    {
     ch = checkStr.charAt(i);
     for (j = 0;  j < checkOK.length;  j++)
     if (ch == checkOK.charAt(j))
     break;
     if (j == checkOK.length)
      {
      	allValid = false;
      	break;
      }
     allNum += ch;
     }
    if (!allValid)
     {
        errorFields+="BrokerID should contain only digits \n";
    	document.Relationship.secondaryBid.focus();
     }
		
 }//End of checkBrokerID function
function checkeffectiveDate(theDate) {
    var elmstr = theDate;
    if (elmstr.length != 10)
   	{
	   errorFields+="effectiveDate should be in mm/dd/yyyy format \n";
	  return false ;	
	}
		 
    for (var i = 0; i < elmstr.length; i++) {
        if ((i < 2 && i > -1) ||
            (i > 2 && i < 5) || 
            (i > 5 && i < 10)) {
            if (elmstr.charAt(i) < "0" || 
                elmstr.charAt(i) > "9") {
		errorFields+="effectiveDate should be in mm/dd/yyyy format \n";
		break;
		}
        }
        else if (elmstr.charAt(i) != "/") {
		errorFields+="effectiveDate should be in mm/dd/yyyy format \n";
		return false ;	
		}
    }
    return true;
}// is date
  
function checkendDate(theDate) {
    var elmstr = theDate;
    if (elmstr.length != 10)
   	{
	   errorFields+="endDate should be in mm/dd/yyyy format \n";
	  return false ;	
	}
		 
    for (var i = 0; i < elmstr.length; i++) {
        if ((i < 2 && i > -1) ||
            (i > 2 && i < 5) || 
            (i > 5 && i < 10)) {
            if (elmstr.charAt(i) < "0" || 
                elmstr.charAt(i) > "9") {
		errorFields+="endDate should be in mm/dd/yyyy format \n";
		break;
		}
        }
        else if (elmstr.charAt(i) != "/") {
		errorFields+="endDat should be in mm/dd/yyyy format \n";
		return false ;	
		}
    }
    return true;
}// is date
function defaultValue() {
var date = new Date();
var d  = date.getDate();
var day = (d < 10) ? '0' + d : d;
var m = date.getMonth() + 1;
var month = (m < 10) ? '0' + m : m;
var yy = date.getYear();
var year = (yy < 1000) ? yy + 1900 : yy;

todays = (day + "/" + month + "/" + year);
//alert("today" + todays);	
}//defaultValue

function compareDate(date1,date2) {

//defaultValue() ;


  var month1 = date1.substring(0,2);
  var day1 = date1.substring(3,5);
  var year1 = date1.substring(6,10);
  

  var month2 = date2.substring(0,2);
  var day2 = date2.substring(3,5);
  var year2 =date2.substring(6,10);
        
     if(year1 > year2)
	{
	errorFields+="endDate is less than effective date \n";
	return false;
	}

	if(year1 == year2)
	{
	if(month1 > month2)
	{
	
	errorFields+="endDate is less than effective date \n";
	return false;
	} 
	}
    if(year1 == year2 && month1 == month2 && day1 > day2)
	{
	
	errorFields+="endDate is less than effective date \n";
	return false;
	}  
}//end of compare date


}//End of validateForm function

   var oldNo = false;
   var listIndex = 0;

   var listUILength = 0;
   var listUIValues = new Array();


   // Function to hide list if there is no data to display
 
function addListHide1() {
addListHide();

 
     
     addsecondaryRole();
	
}

function addListHide() {
	 //alert("inside addListHid");
      	// document.Relationship.AddList.style.visibility = "hidden";


	<!-- Added by Sathish to alert the user for entering incorrect Sec BrokerID -->	

	


	
//document.Relationship.endDate.value = "12/31/4000" ;

}


// function to add primary role from db

     function addPrimaryRole() {


	document.Relationship.primaryRole.focus();

      //alert("rr"); 
      
    
      var prioptions = new Option();
	var secoptions = new Option();
	var str = "Agent" ; 
 	prioptions.text = "Agent";
	prioptions.value = "Agent";
 	secoptions.text = "Agent";
	secoptions.value = "Agent";
//alert(prioptions.text + prioptions.value);
document.Relationship.primaryRole.options[document.Relationship.primaryRole.options.length]= prioptions;
document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.options.length]= secoptions;
  
      var prioptions = new Option();
	var secoptions = new Option();
	var str = "Child" ; 
 	prioptions.text = "Child";
	prioptions.value = "Child";
 	secoptions.text = "Child";
	secoptions.value = "Child";
//alert(prioptions.text + prioptions.value);
document.Relationship.primaryRole.options[document.Relationship.primaryRole.options.length]= prioptions;
document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.options.length]= secoptions;
  
      var prioptions = new Option();
	var secoptions = new Option();
	var str = "Employee" ; 
 	prioptions.text = "Employee";
	prioptions.value = "Employee";
 	secoptions.text = "Employee";
	secoptions.value = "Employee";
//alert(prioptions.text + prioptions.value);
document.Relationship.primaryRole.options[document.Relationship.primaryRole.options.length]= prioptions;
document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.options.length]= secoptions;
  
      var prioptions = new Option();
	var secoptions = new Option();
	var str = "Employer" ; 
 	prioptions.text = "Employer";
	prioptions.value = "Employer";
 	secoptions.text = "Employer";
	secoptions.value = "Employer";
//alert(prioptions.text + prioptions.value);
document.Relationship.primaryRole.options[document.Relationship.primaryRole.options.length]= prioptions;
document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.options.length]= secoptions;
  
      var prioptions = new Option();
	var secoptions = new Option();
	var str = "Firm" ; 
 	prioptions.text = "Firm";
	prioptions.value = "Firm";
 	secoptions.text = "Firm";
	secoptions.value = "Firm";
//alert(prioptions.text + prioptions.value);
document.Relationship.primaryRole.options[document.Relationship.primaryRole.options.length]= prioptions;
document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.options.length]= secoptions;
  
      var prioptions = new Option();
	var secoptions = new Option();
	var str = "Holding Co." ; 
 	prioptions.text = "Holding Co.";
	prioptions.value = "Holding Co.";
 	secoptions.text = "Holding Co.";
	secoptions.value = "Holding Co.";
//alert(prioptions.text + prioptions.value);
document.Relationship.primaryRole.options[document.Relationship.primaryRole.options.length]= prioptions;
document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.options.length]= secoptions;
  
      var prioptions = new Option();
	var secoptions = new Option();
	var str = "Parent" ; 
 	prioptions.text = "Parent";
	prioptions.value = "Parent";
 	secoptions.text = "Parent";
	secoptions.value = "Parent";
//alert(prioptions.text + prioptions.value);
document.Relationship.primaryRole.options[document.Relationship.primaryRole.options.length]= prioptions;
document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.options.length]= secoptions;
  
      var prioptions = new Option();
	var secoptions = new Option();
	var str = "Partner" ; 
 	prioptions.text = "Partner";
	prioptions.value = "Partner";
 	secoptions.text = "Partner";
	secoptions.value = "Partner";
//alert(prioptions.text + prioptions.value);
document.Relationship.primaryRole.options[document.Relationship.primaryRole.options.length]= prioptions;
document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.options.length]= secoptions;
  
      var prioptions = new Option();
	var secoptions = new Option();
	var str = "Peer" ; 
 	prioptions.text = "Peer";
	prioptions.value = "Peer";
 	secoptions.text = "Peer";
	secoptions.value = "Peer";
//alert(prioptions.text + prioptions.value);
document.Relationship.primaryRole.options[document.Relationship.primaryRole.options.length]= prioptions;
document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.options.length]= secoptions;
  
      var prioptions = new Option();
	var secoptions = new Option();
	var str = "Subsidiary" ; 
 	prioptions.text = "Subsidiary";
	prioptions.value = "Subsidiary";
 	secoptions.text = "Subsidiary";
	secoptions.value = "Subsidiary";
//alert(prioptions.text + prioptions.value);
document.Relationship.primaryRole.options[document.Relationship.primaryRole.options.length]= prioptions;
document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.options.length]= secoptions;
  
 
document.Relationship.primaryRole.value = "";
document.Relationship.secondaryRole.value = "";

 }
// function to add  secondary role from db

function addsecondaryRole(){
   //alert("inside seco role");
document.Relationship.secondaryRole.length=0;
   if(document.Relationship.primaryRole.value =="Employer")
	{
	 var secoptions1 = new Option();
	secoptions1.text="Employee";
	secoptions1.value="Employee";
			document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.length]=secoptions1;
 //alert(document.Relationship.secondaryRole.options.length);
		}

   if(document.Relationship.primaryRole.value =="Parent")
	{
	
	 var secoptions1 = new Option();
	secoptions1.text="Child";
	secoptions1.value="Child";
	document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.length]=secoptions1;
//alert(document.Relationship.secondaryRole.options.length);
		}
   if(document.Relationship.primaryRole.value =="Child")
	{
	
	 var secoptions1 = new Option();
	secoptions1.text="Parent";
	secoptions1.value="Parent";
	document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.length]=secoptions1;
//alert(document.Relationship.secondaryRole.options.length);
		}

   if(document.Relationship.primaryRole.value =="Firm")
	{
	 var secoptions1 = new Option();
	secoptions1.text="Firm";
	secoptions1.value="Firm";
 	var secoptions2 = new Option();
	secoptions2.text="Agent";
	secoptions2.value="Agent";
	document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.length]=secoptions1;
document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.length]=secoptions2;
//alert(document.Relationship.secondaryRole.options.length);
		}

if(document.Relationship.primaryRole.value =="Agent")
	{
	 var secoptions1 = new Option();
	secoptions1.text="Firm";
	secoptions1.value="Firm";
 	var secoptions2 = new Option();
	secoptions2.text="Agent";
	secoptions2.value="Agent";
	document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.length]=secoptions1;
document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.length]=secoptions2;
//alert(document.Relationship.secondaryRole.options.length);
		}
if(document.Relationship.primaryRole.value =="Employee")
	{
	 var secoptions1 = new Option();
	secoptions1.text="Employer";
	secoptions1.value="Employer";
	document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.length]=secoptions1;

//alert(document.Relationship.secondaryRole.options.length);
}

if(document.Relationship.primaryRole.value =="Peer")
	{
	 var secoptions1 = new Option();
	secoptions1.text="Peer";
	secoptions1.value="Peer";
	document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.length]=secoptions1;

//alert(document.Relationship.secondaryRole.options.length);

}
if(document.Relationship.primaryRole.value =="Partner")
	{
	 var secoptions1 = new Option();
	secoptions1.text="Partner";
	secoptions1.value="Partner";
	document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.length]=secoptions1;

//alert(document.Relationship.secondaryRole.options.length);

}

if(document.Relationship.primaryRole.value =="Holding Co.")
	{
	 var secoptions1 = new Option();
	secoptions1.text="Subsidiary";
	secoptions1.value="Subsidiary";
	document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.length]=secoptions1;

//alert(document.Relationship.secondaryRole.options.length);

}
if(document.Relationship.primaryRole.value =="Subsidiary")
	{
	 var secoptions1 = new Option();
	secoptions1.text="Holding Co.";
	secoptions1.value="Holding Co.";
	document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.length]=secoptions1;

//alert(document.Relationship.secondaryRole.options.length);

}

if(document.Relationship.primaryRole.value =="")
	{
	 var secoptions1 = new Option();
	secoptions1.text="           ";//"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
	secoptions1.value="";
	document.Relationship.secondaryRole.options[document.Relationship.secondaryRole.length]=secoptions1;

//alert(document.Relationship.secondaryRole.options.length);

}


}




  
  // Function add, modify and manipulate all the functionalities of the list
   function manipulateList( list, prirole, secbid, secname, secrole, effdt, expdt ) {

     if(document.Relationship.primaryRole.value == ""  &&
	document.Relationship.secondaryBid.value == ""  &&
	document.Relationship.secBrokerName.value == ""  &&
	document.Relationship.secondaryRole.value == ""  &&
	document.Relationship.effectiveDate.value == ""  &&
	document.Relationship.endDate.value == "" )  {


}
else {



     var flag =  validateForm(Relationship);
      if(!flag) return false;
	//alert( oldNo );
	//alert( listIndex );
	 enableform();
	document.Relationship.secondaryBid.disabled =false ;
	var errorStatus = false;
	var errorFields = "Please correct the following error(s):";
	var listLength = list.options.length;
	var prirole = prirole.value;
	var secbid = secbid.value;
	var secname = secname.value;
	var secrole = secrole.value;
	var effdt = effdt.value;
	var expdt = expdt.value;
	
	var optionstext = prirole + "-" + secbid  + "-" + secname + "-" + secrole + "-" + effdt + "-" + expdt  ;
	var optionsValue = prirole + "-" + secbid  + "-" + secname + "-" + secrole + "-" + effdt + "-" + expdt  ;


    

	if ( optionstext == "-------" ) {
		errorStatus = true;
		errorFields += "\n" + "You got to enter something to be added to the list";
	}

	if ( prirole == ""  ) {
		errorStatus = true;
		errorFields += "\n" + "Primary role  cannot be empty";
	}

	if ( secbid == ""  ) {
		errorStatus = true;
		errorFields += "\n" + "Secondary BrokerId  cannot be empty";
	}

	if ( effdt == "" ) {
		errorStatus = true;
		errorFields += "\n" + "Effective Date cannot be empty";
	}
	
/*
	if (expdt  == "" ) {
		errorStatus = true;
		errorFields += "\n" + "Expiration date cannot be empty";
	}
*/
	
	
	if ( errorStatus == true ) {
		alert( errorFields );
		return false;
	}
       else
	{
	submit_form();
	
	}	
	
		

        document.Relationship.AddList.style.visibility = ""; 

	var addoptions = new Option();
	addoptions.text = optionstext;
	addoptions.value = optionstext;


	if ( listLength == 0 ) {

		addFirstRow( list );
	}
	else if ( listLength > 0 && oldNo == false ) {
		addAtEnd( list );
	}
	else {
		modifyList( list, listIndex );

	}


	function addFirstRow(ilist) {
		document.Relationship.AddList.style.visibility = "";
		ilist.options[0]=addoptions;
		//ilist.options[0].selected = true;
	//	refresh();
		resetValue();

		document.Relationship.primaryRole.focus();
	}

	function addAtEnd( ilist ) {
		document.Relationship.AddList.style.visibility = "";
		ilist.options[listLength]=addoptions;
		//ilist.options[listLength].selected = true;
	//	refresh();
		resetValue();
		document.Relationship.primaryRole.focus();
	}

	function modifyList( ilist, ilistIndex ) {
		document.Relationship.AddList.style.visibility = "";
		ilist.options[listIndex]=addoptions;
		//ilist.options[listIndex].selected = true;
		//refresh();
		resetValue();
		document.Relationship.primaryRole.focus();
	}

	 function refresh() {
		document.Relationship.primaryRole.value = "";
		document.Relationship.secondaryBid.value = "";
		document.Relationship.secBrokerName.value = "";
		document.Relationship.secondaryRole.value = "";
		document.Relationship.effectiveDate.value = "";
		document.Relationship.endDate.value = "";



		oldNo = false;
	}


	 if(flag) return true;

      }
   }



   //Added by Sathish for delete functionality
   function deleteFromList() {

     	if(document.Relationship.primaryRole.value == ""  &&
		document.Relationship.secondaryBid.value == ""  &&
		document.Relationship.secBrokerName.value == ""  &&
		document.Relationship.secondaryRole.value == ""  &&
		document.Relationship.effectiveDate.value == ""  &&
		document.Relationship.endDate.value == "" )  {

		alert( "A relationship has to be selected first, to be deleted from the list" );
	}
	else {

		if ( document.Relationship.StatusIndicator.value == "D" ) {
			alert( "The selected relationship is already marked for delete" );
			document.Relationship.opmode.value="delete" ;
			Relationship.submit();
		}
		else {
			document.Relationship.opmode.value="delete" ;
			Relationship.submit();
		}

	}
   }



// function to reset values

function resetValue() {
	var addoptions = new Option();
	addoptions.text = "";
	addoptions.value = "";

	var hsubmit = document.Relationship.submitField.value;
	var hopmode = document.Relationship.opmode.value;
	var haddmode = document.Relationship.addmode.value;
	var hrelid = document.Relationship.relId.value;
	var hbrkName = document.Relationship.brkName.value;
	var hprole = document.Relationship.hprimaryRole.value;
	var hsrole = document.Relationship.hsecondaryRole.value;
	var hsecbid = document.Relationship.hsecondaryBid.value;
	var hsbname = document.Relationship.hsecBrokerName.value;
	var heffdate = document.Relationship.heffectiveDate.value;
	var henddate = document.Relationship.hendDate.value;
	var hbkrbid = document.Relationship.bkrbid.value;
	var hind = document.Relationship.indicator.value;
	var hkey = document.Relationship.TypeChangeKey.value;
	var hstsind = document.Relationship.StatusIndicator.value;

	var prole = document.Relationship.primaryRole.value;
	var srole = document.Relationship.secondaryRole.value;

	document.Relationship.reset();

	document.Relationship.submitField.value = hsubmit;
	document.Relationship.opmode.value = hopmode;
	document.Relationship.addmode.value = haddmode;
	document.Relationship.relId.value = hrelid;
	document.Relationship.brkName.value = hbrkName;
	document.Relationship.hprimaryRole.value = hprole;
	document.Relationship.hsecondaryRole.value = hsrole;
	document.Relationship.hsecondaryBid.value = hsecbid;
	document.Relationship.hsecBrokerName.value = hsbname;
	document.Relationship.heffectiveDate.value = heffdate;
	document.Relationship.hendDate.value = henddate;
	document.Relationship.bkrbid.value = hbkrbid;
	document.Relationship.indicator.value = hind;
	document.Relationship.TypeChangeKey.value = hkey;
	document.Relationship.StatusIndicator.value = hstsind;

	document.Relationship.primaryRole.value = prole;
	document.Relationship.secondaryRole.value = srole;





/*
		document.Relationship.primaryRole.value = "";
		document.Relationship.secondaryBid.value = "";
		document.Relationship.secBrokerName.value = "";
		document.Relationship.secondaryRole.value = "";
		document.Relationship.effectiveDate.value = "";
		document.Relationship.endDate.value = "";
		 
		document.Relationship.primaryRole.text = "";
		document.Relationship.secondaryBid.text = "";
		document.Relationship.secBrokerName.text = "";
		document.Relationship.secondaryRole.text = "";
		document.Relationship.effectiveDate.text = "";
		document.Relationship.endDate.text = "";
*/		 
		 
	}


   function popAgain( popList, popValue ) {


	if ( enableList ) {

	var values = popValue;

	for( var m=0; m < popList.length; m++ ) {
		if ( popList.options[m].selected == true ) {
			listIndex = m;
			break;
		}
	}


	var temp;

	var count = new Array();
	var splitData = new Array();
		
	var j = 0;
	for (var i=0; i < values.length; i++) {
		temp = "" + values.substring(i, i+1);

		if ( temp == (":" ) ) {
			count[j] = i;
			j++;
		}
		
	}
	count[j] = values.length;

	var k = 0;
	for ( i=0; i < count.length; i++ ) {
		splitData[i] = values.substring( k, count[i] );
		k = count[i]+1;
	}
	
	
	if ( splitData[1] == undefined || splitData[2] == undefined || splitData[3] == undefined) {
	
		alert( "Click on the Relationship you want to populate in the fields" );
	}
	else {	
	
       addPrimaryRole();
	document.Relationship.primaryRole.value = splitData[0];
	document.Relationship.secondaryBid.value = splitData[1];
	document.Relationship.secBrokerName.value = splitData[2];
	document.Relationship.secondaryRole.value = splitData[3];
	document.Relationship.effectiveDate.value = splitData[4];
	document.Relationship.endDate.value = splitData[5];
	document.Relationship.relId.value = splitData[6];
	document.Relationship.StatusIndicator.value = splitData[7];
	document.Relationship.PrimarySecondaryIndicator.value = splitData[8];	
	document.Relationship.OldPrimaryIK.value = splitData[9];		
	document.Relationship.OldSecondaryIK.value = splitData[10];			

    //  alert(document.Relationship.secBrokerName.value = splitData[2]);
	oldNo = true;
	if(document.Relationship.secBrokerName.value=="" ){
	document.Relationship.secondaryBid.disabled =false ;
	}
	else
	{
	document.Relationship.secondaryBid.disabled =false ;
	}
addsecondaryRole();
document.Relationship.secondaryRole.value = splitData[3];

	}
	}
	
	//disableform() ;
   }

//function to check effdt between primary broker


// function for date validation

// function for disable
	function disableform() {

	document.Relationship.primaryRole.disabled =true;
	document.Relationship.secondaryBid.disabled =true ;
	document.Relationship.secBrokerName.disabled =true ;
	document.Relationship.secondaryRole.disabled  =true ;
	document.Relationship.effectiveDate.disabled =true ;
	document.Relationship.endDate.disabled =true ;  
  }
  
	function enableform() {

	document.Relationship.primaryRole.disabled =false;
	document.Relationship.secondaryBid.disabled =true ;
	document.Relationship.secBrokerName.disabled =false ;
	document.Relationship.secondaryRole.disabled  =false ;
	document.Relationship.effectiveDate.disabled=false;
	document.Relationship.endDate.disabled =false ;  

        enableList = true;
	document.Relationship.AddList.style.background = "white";
  }

function test(){
var t = validationFinal();
alert("yyyy" + t);
}

function validationFinal() {
//alert("inside---1");
var flag = false;
     if(document.Relationship.primaryRole.value !=""  ||
	document.Relationship.secondaryBid.value !="" ||
	document.Relationship.secBrokerName.value !="" || 
	document.Relationship.secondaryRole.value  !="" ||  
	document.Relationship.effectiveDate.value !="" ||  
	document.Relationship.endDate.value !="" )
{
 	flag = validateForm(Relationship);
	if(!flag) 
	return false; 
}
return flag;			
}//validationFinal 



 function changeMode()
{
var flag = true;
document.Relationship.opmode.value="save" ;

     if(document.Relationship.primaryRole.value !=""  ||
	document.Relationship.secondaryBid.value !="" ||
	document.Relationship.secBrokerName.value !="" || 
	document.Relationship.secondaryRole.value  !="" ||  
	document.Relationship.effectiveDate.value !="" ||  
	document.Relationship.endDate.value !="" )
{
 	flag = validateForm(Relationship);
	if(!flag) 
	return false; 
}
	


}



function submit_form()
{
document.Relationship.opmode.value="add" ;
Relationship.submit();
}

function addSecondaryName()
{

	//Added by Sathish for validating Secondary BID

	var secBID = document.Relationship.secondaryBid.value;
	var mainBID = "5051";

     if ( secBID != "" ) {

	if ( checkSecBid(secBID) ) {

		if ( secBID == mainBID ) {

			alert( "The Secondary BrokerId should not be equal to Primary BrokerID");
			document.Relationship.secondaryBid.value = "";
			document.Relationship.secondaryBid.focus();		
			return false;		

		}
		else {
			document.Relationship.brkName.value="name" ;
			document.Relationship.hprimaryRole.value = document.Relationship.primaryRole.value ;
			document.Relationship.hsecondaryRole.value = document.Relationship.secondaryRole.value ;
			document.Relationship.hsecBrokerName.value = document.Relationship.secBrokerName.value ;
			document.Relationship.heffectiveDate.value = document.Relationship.effectiveDate.value ;
			document.Relationship.hendDate.value = document.Relationship.endDate.value ; 
			Relationship.submit();
		}
	}
    }
}


//Added by sathish to validate the secondary bid
function checkSecBid(validvalue) {

	var valid = "1234567890";

	var bidstatus = true;

	for (var i=0; i < validvalue.length; i++) {
		temp = "" + validvalue.substring(i, i+1);
		if (valid.indexOf(temp) == "-1") {
	      		alert( "Invalid characters in Secondary BrokerID" );
			document.Relationship.secondaryBid.value = "";
			bidstatus = false;
	      		break;
		}
	}

	if ( bidstatus )
		return true;
	else 	
		return false;

}


</SCRIPT>

</HEAD>

<BODY bgcolor="#0B5F77" OnLoad="addPrimaryRole();addListHide1() ">
<FORM name="Relationship" method="POST"   ACTION="RelationshipServlet" >
  <table width="95%" border="0" cellspacing="0" cellpadding="2" align="center">
    <tr align="center" valign="middle"> 
      <td> 
        <table width="670" border="0" cellspacing="0" cellpadding="0">
          <tr> 
            <td align="left" width="3" height="20"><img src="images/tleft3.gif" width="3" height="20"></td>
            <td bgcolor="#E6E9F0" width="332" align="left"><font class="stitle">&nbsp;&nbsp;&nbsp;License 
              / DOI</font></td>
            <td bgcolor="#E6E9F0" width="335" align="right"> 
              <input type="button" value="Edit" name="Edit" class="lebotton" onClick="enableAll(document.AgreementsForm)">
              <input type="button" value="Reset" name="Reset" onClick="resetAgrForm(document.AgreementsForm)" class="lebotton">
            </td>
          </tr>
        </table>
        <table border="0" cellspacing="0" cellpadding="0" width="670">
          <tr> 
            <td><img src="images/spacer.gif" border="0" width="1" height="1"></td>
            <td><img src="images/spacer.gif" border="0" width="1" height="1"></td>
            <td ><img src="images/spacer.gif" border="0" width="1" height="1"></td>
          </tr>
          <tr> 
            <td bgcolor="#E6E9F0"><img src="images/spacer.gif" border="0" width="1" height="1"></td>
            <td bgcolor="#E6E9F0"><img src="images/spacer.gif" border="0" width="1" height="1"></td>
            <td bgcolor="#E6E9F0"><img src="images/spacer.gif" border="0" width="1" height="1"></td>
          </tr>
          <tr> 
            <td width="1" bgcolor="#E6E9F0"><img src="images/spacer.gif" border="0" width="1" height="1"></td>
            <td width="668"> 
              <table width="100%" border="0" cellpadding="0" cellspacing="0">
                <tbody> 
                <tr> 
                  <td align="center" bgcolor="#E6E9F0" width="150" height="30"><font class="ComTitle" style="color:#eb0000">Primary 
                    Broker</font></td>
                  <td colspan="4" align="center" height="30"><font class="ComTitle">Secondary 
                    Broker</font></td>
                  <td colspan="3" align="right" height="30">&nbsp;</td>
                </tr>
                <tr> 
                  <td align="center" bgcolor="#E6E9F0" width="150"><font class="stitle">Relationship 
                    Role</font></td>
                  <td align="center"><font class="ComTitle">Broker ID</font></td>
                  <td align="center"><font class="ComTitle">Broker Name</font></td>
                  <td align="center"><font class="ComTitle">Relationship Role</font></td>
                  <td align="center"><font class="ComTitle">Effective </font></td>
                  <td align="center"><font class="ComTitle">Expired</font></td>
                  <td>&nbsp;</td>
                </tr>
                <tr> 
                  <td align="center" bgcolor="#E6E9F0" width="150"> 
                    <select name="primaryRole" class="select2" tabindex="1" onChange ="addsecondaryRole()">
                    </select>
                  </td>
                  <td align="center" bgcolor="#E6E9F0"> 
                    <input class="input2" size="10" type="text" maxlength="10" name="secondaryBid" tabindex="2" onBlur="addSecondaryName()" >
                  </td>
                  <td align="center" bgcolor="#E6E9F0"> 
                    <input class="input2" size="15" type="text" maxlength="30" name="secBrokerName"  readonly style="background-color : silver;">
                  </td>
                  <td align="center" bgcolor="#E6E9F0"> 
                    <select name="secondaryRole" class="select2" tabindex="3">
                    </select>
                  </td>
                  <td align="center" bgcolor="#E6E9F0"> 
                    <input class="input2" size="11" type="text" maxlength="10" name="effectiveDate" tabindex="4"  >
                  </td>
                  <td align="center" bgcolor="#E6E9F0"> 
                    <input class="input2" size="11" type="text" maxlength="10" name="endDate"  tabindex="5"  >
                  </td>
                  <td bgcolor="#E6E9F0"><a href="#" tabindex="29" onClick="addToList(document.AgentMaintenance);" onMouseOver="javascript:add.src = image15.src;" onMouseOut="javascript:add.src = image16.src;"><img src="images/add_off.gif" width="50" height="19" border="0" alt="Add" name="add"></a></td>
                </tr>
                </tbody> 
              </table>
              <table width="100%" border="0" cellspacing="0" cellpadding="2">
                <tr align="center" valign="bottom"> 
                  <td colspan="7"> 
                    <select size="3" name="AddList" onFocus="this.blur()"  onClick="return popAgain(AddList,this.form.AddList.value)" class="multiselect2">
                    </select>
                  </td>
                </tr>
                <tr align="center" valign="bottom"> 
                  <td colspan="7"><a href="#" onClick="deleteFromList(document.AgentMaintenance);" onMouseOver="javascript:delsel.src = image17.src;" onMouseOut="javascript:delsel.src = image18.src;"><img src="images/delsel_off.gif" width="138" height="19" border="0" alt="Delete Selected" name="delsel" vspace="0"></a>
                    <input type="hidden" name="InsertValues">
                    <input type="hidden" name="UpdateValues">
                    <input type="hidden" name="CheckUpdateValues">
                    <input type="hidden" name="action" value="">
                    <input type="hidden" name="submitField" value="save">
                    <input type="hidden" name="opmode" value="">
                    <input type="hidden" name="addmode" value="">
                    <input type="hidden" name="relId" value="0">
                    <input type="hidden" name="brkName" value="">
                    <input type="hidden" name="hprimaryRole" value="">
                    <input type="hidden" name="hsecondaryRole" value="">
                    <input type="hidden" name="hsecondaryBid" value="">
                    <input type="hidden" name="hsecBrokerName" value="">
                    <input type="hidden" name="heffectiveDate" value="0">
                    <input type="hidden" name="hendDate" value="">
                    <input type="hidden" name="bkrbid" value="5051">
                    <input type="hidden" name="indicator" value="0">
                    <input type="hidden" name="TypeChangeKey" value="">
                    <input type="hidden" name="StatusIndicator" value="">
                    <input type="hidden" name="PrimarySecondaryIndicator" value="">
                    <input type="hidden" name="OldPrimaryIK" value="0">
                    <input type="hidden" name="OldSecondaryIK" value="0">
                    <input type="hidden" name="SaveExitPage" value="No">
                  </td>
                </tr>
              </table>
            </td>
            <td width="1" bgcolor="#E6E9F0"><img src="images/spacer.gif" border="0" width="1" height="1"></td>
          </tr>
          <tr> 
            <td height="1" bgcolor="#E6E9F0"><img src="images/spacer.gif" border="0" width="1" height="1"></td>
            <td height="1" bgcolor="#E6E9F0" width="398"><img src="images/spacer.gif" border="0" width="1" height="1"></td>
            <td height="1" bgcolor="#E6E9F0"><img src="images/spacer.gif" border="0" width="1" height="1"></td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
  </FORM>
</BODY>
</HTML>